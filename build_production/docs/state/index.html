<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="Introduction to States">

        <meta property="og:site_name" content="Laravel USSD"/>
        <meta property="og:title" content="State | Laravel USSD"/>
        <meta property="og:description" content="Introduction to States"/>
        <meta property="og:url" content="https://sparors.github.io/ussd-docs/docs/state"/>
        <meta property="og:image" content="/ussd-docs/assets/img/logo.png"/>
        <meta property="og:type" content="website"/>

        <meta name="twitter:image:alt" content="Laravel USSD">
        <meta name="twitter:card" content="summary_large_image">

                    <meta name="generator" content="tighten_jigsaw_doc">
        
        <title>Laravel USSD | State</title>

        <link rel="home" href="https://sparors.github.io/ussd-docs">
        <link rel="icon" href="/ussd-docs/favicon.ico">

        
                    <!-- Insert analytics code here -->
        
        <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="/ussd-docs/assets/build/css/main.css?id=36bd75733674d1919eaa">

                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
            </head>

    <body class="flex flex-col justify-between min-h-screen bg-gray-100 text-gray-800 leading-normal font-sans">
        <header class="flex items-center shadow bg-white border-b h-24 mb-8 py-4" role="banner">
            <div class="container flex items-center max-w-8xl mx-auto px-4 lg:px-8">
                <div class="flex items-center">
                    <a href="/ussd-docs/" title="Laravel USSD home" class="inline-flex items-center">
                        <img class="h-8 md:h-10 mr-3" src="/ussd-docs/assets/img/logo.svg" alt="Laravel USSD logo" />

                        <h1 class="text-lg md:text-2xl text-blue-900 font-semibold hover:text-blue-600 my-0 pr-4">Laravel USSD</h1>
                    </a>
                </div>

                <div class="flex flex-1 justify-end items-center text-right md:pl-10">
                                            <button
    title="Start searching"
    type="button"
    class="flex md:hidden bg-gray-100 hover:bg-blue-100 justify-center items-center border border-gray-500 rounded-full focus:outline-none h-10 px-3"
    onclick="searchInput.toggle()"
>
    <img src="/assets/img/magnifying-glass.svg" alt="search icon" class="h-4 w-4 max-w-none">
</button>

<div id="js-search-input" class="docsearch-input__wrapper hidden md:block">
    <label for="search" class="hidden">Search</label>

    <input
        id="docsearch-input"
        class="docsearch-input relative block h-10 transition-fast w-full lg:w-1/2 xl:w-1/3 bg-gray-100 outline-none rounded-full text-gray-700 border border-gray-500 focus:border-blue-400 ml-auto px-4 pb-0"
        name="docsearch"
        type="text"
        placeholder="Search"
    >

    <button
        class="md:hidden absolute pin-t pin-r h-full font-light text-3xl text-blue-500 hover:text-blue-600 focus:outline-none -mt-px pr-7"
        onclick="searchInput.toggle()"
    >&times;</button>
</div>

                                    </div>
            </div>

                <button class="flex justify-center items-center bg-blue-500 border border-blue-500 h-10 mr-4 px-5 rounded-full lg:hidden focus:outline-none"
    onclick="navMenu.toggle()"
>
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current text-white h-9 w-4" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current text-white h-9 w-4" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

        </header>

        <main role="main" class="w-full flex-auto">
            <section class="container max-w-8xl mx-auto px-6 md:px-8 py-4">
    <div class="flex flex-col lg:flex-row">
        <nav id="js-nav-menu" class="nav-menu hidden lg:block">
            <ul class="my-0">
            <li class="pl-4">
            
        <p class="nav-menu__item text-gray-600">GETTING STARTED</p>
    
            
        <ul class="my-0">
            <li class="pl-4">
            
        <a href="/ussd-docs/docs/requirements"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Requirements
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/ussd-docs/docs/installation"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Installation
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/ussd-docs/docs/questions-issues"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Questions and Issues
        </a>
    
    </li>
    </ul>
    </li>
            <li class="pl-4">
            
        <p class="nav-menu__item text-gray-600">CORE CONCEPTS</p>
    
            
        <ul class="my-0">
            <li class="pl-4">
            
        <a href="/ussd-docs/docs/state"
            class="lvl1  active font-semibold text-blue-500 nav-menu__item hover:text-blue-500"
        >
            State
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/ussd-docs/docs/menu"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Menu
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/ussd-docs/docs/action"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Action
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/ussd-docs/docs/decision"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Decision
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/ussd-docs/docs/record"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Record
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/ussd-docs/docs/machine"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Machine
        </a>
    
    </li>
    </ul>
    </li>
    </ul>
        </nav>

        <div class="DocSearch-content w-full lg:w-3/5 break-words pb-16 lg:pl-4" v-pre>
            <h1 id="states">States</h1>

<p>When a user dials a USSD shortcode. E.g. (*392#). A menu is presented to
him/her. There may or may not be an input field. If there is an input field,
the user is expected to enter some text to take him to another state. 
All the views a user sees as he navigates through the USSD application are 
referred to as States.</p>

<h2 id="creating-states">Creating States</h2>

<p>Laravel uses PSR-4 autoloading to load all the resources in the 
<em>project/app</em> directory. That means you don't have to manually require, 
include it or discover it with <code>composer dump-autoload</code>. 
You are expected to put your application logic in this directory. 
You can create states in the <em>project/app</em> directory or under any sub 
directory. How deep they are nested does not matter.</p>

<h3 id="state-command">Meet the Artisan State Command</h3>

<p>We provide a ussd artisan command which allows you to quickly create new states.</p>

<pre><code class="language-bash">php artisan ussd:state Welcome
</code></pre>

<p>This will generate a class called Welcome.php in <em>app/Http/Ussd/States</em> 
directory. If the directory does not exist, it will be created for you.</p>

<h3 id="state-directory">Why in <em>app/Http/Ussd/States</em></h3>

<p>That is the default root directory specified in <em>config/ussd.php</em>. 
If the configuration file does not exist, you can publish it, 
<a href="../installation#installation-config">see</a>.</p>

<p>To change the default directory to <em>app/Ussd</em> change the 
<em>state_namespace</em> variable in the configuration to <code>App\\Ussd</code> 
before running the command.</p>

<h3 id="state-nesting">Nested States</h3>

<p>Your default directory is <em>app/Http/Ussd/States</em> but you want 
some states nested. No need to be changing configurations. 
For example, if you want to create Amount.php state class in 
<em>app/Http/Ussd/States/Airtime</em>. Just specify the relative path like this:</p>

<p>Linux/Unix</p>

<pre><code class="language-bash">php artisan ussd:state airtime/amount
</code></pre>

<p>Windows</p>

<pre><code class="language-bash">php artisan ussd:state airtime\amount
</code></pre>

<h3 id="state-directory-convention">Why are the directory and class starting with caps.</h3>

<p>Take a good look are the file structure in app. That the format they 
all use. It simple convention and we ensure you stick with that, 
so if enter airtime/amount for Airtime/Amount, w
e just fix that for you. Isn't it cool?</p>

<h2 id="understanding-states">Understanding States</h2>

<p>This is a sample State class generated:</p>

<pre><code class="language-php">&lt;?php

namespace App\Http\Ussd\States;

use Sparors\Ussd\State;

class Welcome extends State
{
    protected function beforeRendering(): void
    {
        //
    }

    protected function afterRendering(string $argument): void
    {
        //
    }
}
</code></pre>

<h3 id="state-properties">State Properties</h3>

<p>Every state class has the following properties:</p>

<div class="space-y-1">
    <div class="flex items-center">
        <svg class="w-6 h-6 fill-current text-blue-700 bg-blue-200 rounded-full p-1" fill="currentColor" viewBox="0 0 20 20"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
        <a href="#state-property-action" class="inline-block ml-2">
            action
        </a>
    </div>
    <div class="flex items-center">
        <svg class="w-6 h-6 fill-current text-blue-700 bg-blue-200 rounded-full p-1" fill="currentColor" viewBox="0 0 20 20"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
        <a href="../record#record" class="inline-block ml-2">
            record
        </a>
    </div>
    <div class="flex items-center">
        <svg class="w-6 h-6 fill-current text-blue-700 bg-blue-200 rounded-full p-1" fill="currentColor" viewBox="0 0 20 20"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
        <a href="../menu#menus" class="inline-block ml-2">
            menu
        </a>
    </div>
    <div class="flex items-center">
        <svg class="w-6 h-6 fill-current text-blue-700 bg-blue-200 rounded-full p-1" fill="currentColor" viewBox="0 0 20 20"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
        <a href="../decision#decision" class="inline-block ml-2">
            decision
        </a>
    </div>
</div>

<p>The rest of the property will be explained in a later section apart from
<code>action</code>.</p>

<h3 id="state-property-action">Action</h3>

<p>Action help to determine weather the state should display an input for response
or no input (usually the last state).</p>

<h4 id="state-property-action-use">Setting action</h4>

<pre><code class="language-php">&lt;?php

namespace App\Http\Ussd\States;

use Sparors\Ussd\State;

class Welcome extends State
{
    protected $action = self::PROMPT; // for prompt (without input)
    // for input use self::INPUT 
    // but since input is default, you can decide not to specify.
}
</code></pre>

<h3 id="state-methods">State Methods</h3>

<p>State has the following abstract methods</p>

<div class="space-y-1">
    <div class="flex items-center">
        <svg class="w-6 h-6 fill-current text-blue-700 bg-blue-200 rounded-full p-1" fill="currentColor" viewBox="0 0 20 20"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
        <a href="#before-rendering-method" class="inline-block ml-2">
            beforeRendering
        </a>
    </div>
    <div class="flex items-center">
        <svg class="w-6 h-6 fill-current text-blue-700 bg-blue-200 rounded-full p-1" fill="currentColor" viewBox="0 0 20 20"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
        <a href="#after-rendering-method" class="inline-block ml-2">
            afterRendering
        </a>
    </div>
</div>

<h4 id="before-rendering-method">The <em>beforeRendering</em> Method</h4>

<p>This method is where ussd menus are constructed. You can perform other 
functions like saving data and retrieving it for later use. 
This is where you use <code>menu</code> and <code>record</code> property. <a href="../menu#creating-menus">See</a></p>

<h4 id="after-rendering-method">The <em>afterRendering</em> Method</h4>

<p>This primary purpose of this method is to given you the privilege to 
specify which state the user should see next after examining his input. 
The input is the param string argument passed to the method.
This is where you use <code>decision</code> and <code>record</code> property. <a href="../decision#using-decision">See</a></p>
        </div>
    </div>
</section>
        </main>

        <script src="/ussd-docs/assets/build/js/main.js?id=8b1f137f16842f6fe7d3"></script>

        <script>
    const navMenu = {
        toggle() {
            const menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
        },
    }
</script>
            <script type="text/javascript">
            docsearch({
                apiKey: '74d3945d9e6d08bcb8cd48fe58d4a948',
                indexName: 'sparors_ussd',
                inputSelector: '#docsearch-input',
                debug: false // Set debug to true if you want to inspect the dropdown
            });

            const searchInput = {
                toggle() {
                    const menu = document.getElementById('js-search-input');
                    menu.classList.toggle('hidden');
                    menu.classList.toggle('md:block');
                    document.getElementById('docsearch-input').focus();
                },
            }
        </script>
    
        <footer class="bg-white text-center text-sm mt-12 py-4" role="contentinfo">
            <ul class="flex flex-col md:flex-row justify-center">
                <li class="md:mr-2">
                    &copy; <a href="https://sparors.github.io" title="Sparors website">Sparors</a> 2020.
                </li>

                <li>
                    Built with <a href="http://jigsaw.tighten.co" title="Jigsaw by Tighten">Jigsaw</a>
                    and <a href="https://tailwindcss.com" title="Tailwind CSS, a utility-first CSS framework">Tailwind CSS</a>.
                </li>
            </ul>
        </footer>
    </body>
</html>
